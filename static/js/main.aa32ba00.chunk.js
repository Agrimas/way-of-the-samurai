(this["webpackJsonpway-of-the-samurai"]=this["webpackJsonpway-of-the-samurai"]||[]).push([[0],{100:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r=n(8),a=n(2),c=n(241),s="SEND-MESSAGE",i={dialogsData:[{id:1,name:"Anton"},{id:2,name:"Dima"},{id:3,name:"Sveta"},{id:4,name:"Sasha"}],messagesData:[{id:1,message:"Hi",isMy:!1},{id:2,message:"Hi",isMy:!0},{id:3,message:"How are you?",isMy:!1}]},u=function(e){return{type:s,text:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:var n={id:Object(c.a)(),message:t.text,isMy:!0};return Object(a.a)(Object(a.a)({},e),{},{messagesData:[].concat(Object(r.a)(e.messagesData),[n])});default:return e}}},11:function(e,t,n){e.exports={aside:"Sidebar_aside__PTcLi",item:"Sidebar_item__3nKwi",active:"Sidebar_active__gQGJA",friendsContainer:"Sidebar_friendsContainer__3EE6q"}},113:function(e,t,n){},15:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var r=n(102),a=n.n(r).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"4e70ea14-87f8-403e-9a3c-6012dce2b89c"}}),c={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return a.post("follow/".concat(e)).then((function(e){return e.data.resultCode}))},unFollow:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data.resultCode}))}},s={auth:function(){return a.get("auth/me/").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.post("auth/login",{email:e,password:t,remember:n}).then((function(e){return e.data}))},logOut:function(){return a.delete("auth/login")}},i={getProfileInfo:function(e){return a.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return a.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return a.put("profile/status",{status:e})}}},240:function(e,t,n){"use strict";n.r(t);n(69);var r=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,247)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},a=n(0),c=n.n(a),s=n(46),i=n.n(s),u=(n(113),n(5)),o=n(9),l=n(11),f=n.n(l),d=n(1),j=function(){return Object(d.jsxs)("aside",{className:f.a.aside,children:[Object(d.jsx)("div",{className:f.a.item,children:Object(d.jsx)(o.b,{to:"/profile",activeClassName:f.a.active,children:"Profile"})}),Object(d.jsx)("div",{className:f.a.item,children:Object(d.jsx)(o.b,{to:"/users",activeClassName:f.a.active,children:"Users"})}),Object(d.jsx)("div",{className:f.a.item,children:Object(d.jsx)(o.b,{to:"/dialogs",activeClassName:f.a.active,children:"Messages"})}),Object(d.jsx)("div",{className:f.a.item,children:Object(d.jsx)(o.b,{to:"/news",activeClassName:f.a.active,children:"News"})}),Object(d.jsx)("div",{className:f.a.item,children:Object(d.jsx)(o.b,{to:"/music",activeClassName:f.a.active,children:"Music"})}),Object(d.jsx)("div",{className:f.a.item,children:Object(d.jsx)(o.b,{to:"/settings",activeClassName:f.a.active,children:"Settings"})})]})},b=function(){return Object(d.jsx)(d.Fragment,{children:"News"})},p=function(){return Object(d.jsx)(d.Fragment,{children:"Music"})},O=function(){return Object(d.jsx)(d.Fragment,{children:"Settings"})},h=n(3),m=n.n(h),g=n(7),v=n(17),x=n(21),w=n(65),_=n.n(w),S=n(34),y=n.n(S),P=n.p+"static/media/user.89565353.jpg",k=n(33);var C=function(e){var t=e.id,n=e.name,r=e.status,c=e.photos,s=e.followed,i=e.follow,u=e.unFollow,l=Object(a.useState)(!1),f=Object(v.a)(l,2),j=f[0],b=f[1];return Object(d.jsxs)("div",{className:y.a.container,children:[Object(d.jsxs)("div",{className:y.a.avatarBlock,children:[Object(d.jsx)(o.b,{to:"/profile/".concat(t),children:Object(d.jsx)("img",{src:c.small?c.small:P,alt:""})}),Object(d.jsx)("button",{disabled:j,onClick:function(){s?Object(k.a)(u,b,[t]):Object(k.a)(i,b,[t])},className:y.a.follow,children:s?"Unfollow":"Follow"})]}),Object(d.jsx)("div",{className:y.a.info,children:Object(d.jsxs)("div",{className:y.a.nameAndStatus,children:[Object(d.jsx)("div",{children:n}),Object(d.jsx)("div",{children:r})]})})]})};var N=function(e){var t=e.users,n=e.follow,r=e.unFollow;return Object(d.jsxs)("div",{className:_.a.container,children:[Object(d.jsx)("div",{className:_.a.usersListContainer,children:t.map((function(e){return Object(d.jsx)(C,{id:e.id,photos:e.photos,name:e.name,status:e.status,followed:e.followed,follow:n,unFollow:r},e.id)}))}),Object(d.jsx)("button",{children:"Show More"})]})},E=n(8),U=n(2),A=n(15),D=function(e,t,n,r){return e.map((function(e){return e[t]===n?Object(U.a)(Object(U.a)({},e),r):e}))},L="users/SET-USERS",T="users/FOLLOW",F="users/UNFOLLOW",B="users/SET-CURRENT-PAGE",I="users/SET-TOTAL-USERS-COUNT",z={usersData:[],pageSize:5,totalUsersCount:0,currentPage:1};var R=function(e){return{type:T,id:e}},M=function(e){return{type:F,id:e}},H=function(){var e=Object(g.a)(m.a.mark((function e(t,n,r,a){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(n);case 2:return 0===(c=e.sent)&&t(a(n)),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(U.a)(Object(U.a)({},e),{},{usersData:D(e.usersData,"id",t.id,{followed:!0})});case F:return Object(U.a)(Object(U.a)({},e),{},{usersData:D(e.usersData,"id",t.id,{followed:!1})});case L:return Object(U.a)(Object(U.a)({},e),{},{usersData:Object(E.a)(t.users)});case B:return Object(U.a)(Object(U.a)({},e),{},{currentPage:t.currentPage});case I:return Object(U.a)(Object(U.a)({},e),{},{totalUsersCount:t.totalUsersCount});default:return e}},J=n(47),V=n(28),K=function(e){return e.usersPage.usersData},G=function(e){return e.usersPage.pageSize},Q=function(e){return e.usersPage.totalUsersCount},Y=function(e){return e.usersPage.currentPage},Z=n(66),W=n.n(Z);var X=function(e){for(var t=e.totalItemsCount,n=e.pageSize,r=e.onPageChange,c=e.currentPage,s=e.portionSize,i=Math.ceil(t/n),u=[],o=1;o<i;o++)u.push(o);var l=Math.ceil(i/s),f=Object(a.useState)(1),j=Object(v.a)(f,2),b=j[0],p=j[1],O=(b-1)*s+1,h=b*s;return Object(d.jsxs)("div",{className:W.a.paginationBlock,children:[1!==b&&Object(d.jsx)("button",{onClick:function(){p(b-1)},children:"Prev"}),u.filter((function(e){return e>=O&&e<=h})).map((function(e){return Object(d.jsx)("span",{onClick:function(){r(e)},className:c===e?W.a.selectedPage:"",children:e},e)})),b!==l&&Object(d.jsx)("button",{onClick:function(){p(b+1)},children:"Next"})]})};var $=Object(V.c)(Object(x.b)((function(e){return{users:K(e),pageSize:G(e),totalUsersCount:Q(e),currentPage:Y(e)}}),{follow:function(e){return function(t){return H(t,e,A.c.follow,R)}},unFollow:function(e){return function(t){return H(t,e,A.c.unFollow,M)}},requestUsers:function(e,t){return function(){var n=Object(g.a)(m.a.mark((function n(r){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:B,currentPage:e}),n.next=3,A.c.getUsers(e,t);case 3:a=n.sent,r((s=a.items,{type:L,users:s})),r((c=a.totalCount,{type:I,totalUsersCount:c}));case 6:case"end":return n.stop()}var c,s}),n)})));return function(e){return n.apply(this,arguments)}}()}}))((function(e){var t=e.requestUsers,n=e.currentPage,r=e.pageSize,c=e.users,s=e.totalUsersCount,i=e.follow,u=e.unFollow,o=Object(a.useState)(!1),l=Object(v.a)(o,2),f=l[0],j=l[1],b=Object(a.useState)(!0),p=Object(v.a)(b,2),O=p[0],h=p[1];Object(a.useEffect)((function(){O&&h(!1),Object(k.a)(t,j,[n,r])}),[]);var x=function(){var e=Object(g.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)(t,j,[n,r]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(X,{totalItemsCount:s,pageSize:r,currentPage:n,onPageChange:x,portionSize:10}),f||O?Object(d.jsx)(J.a,{}):Object(d.jsx)(N,{users:c,follow:i,unFollow:u})]})})),ee=n(30),te=n.n(ee),ne=function(e){var t=e.isAuth,n=e.login,r=e.logOut,a=e.profile;return Object(d.jsxs)("header",{className:te.a.header,children:[Object(d.jsx)("div",{className:te.a.logoBlock,children:Object(d.jsx)("img",{src:"https://im0-tub-by.yandex.net/i?id=58b9c9b7af5f19fe14b2fee9cf12b88e&n=13",alt:"logo"})}),Object(d.jsx)("div",{className:te.a.navBlock,children:t&&n?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(o.b,{className:te.a.loginBLock,to:"/profile",children:null===a||void 0===a?void 0:a.fullName}),Object(d.jsx)("button",{className:te.a.loginBLock,onClick:function(){r()},children:"Quit"})]}):Object(d.jsx)(o.b,{className:te.a.loginBLock,to:"/login",children:"Log in"})})]})},re="auth/SET-USER-DATA",ae="auth/SET-USER-PROFILE-DATA",ce="auth/SET-AUTH",se="auth/SET-ERROR",ie={userId:null,email:null,login:null,profile:null,isFetching:!0,isAuth:!1};var ue=function(e,t,n){return{type:re,userId:e,email:t,login:n}},oe=function(e){return{type:ae,profile:e}},le=function(e){return{type:ce,isAuth:e}},fe=function(e){return{type:se,error:e}},de=function(){return function(){var e=Object(g.a)(m.a.mark((function e(t){var n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.auth();case 2:if(0!==(n=e.sent).resultCode){e.next=12;break}return r=n.data,e.next=7,Promise.all([t(ue(r.id,r.email,r.login)),t(le(!0))]);case 7:return e.next=9,A.b.getProfileInfo(r.id);case 9:return a=e.sent,e.next=12,t(oe(a));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};oe();var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return Object(U.a)(Object(U.a)({},e),{},{userId:t.userId,email:t.email,login:t.login});case ae:return Object(U.a)(Object(U.a)({},e),{},{profile:t.profile});case ce:return Object(U.a)(Object(U.a)({},e),{},{isAuth:t.isAuth});case se:return Object(U.a)(Object(U.a)({},e),{},{error:t.error});default:return e}};var be=Object(x.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,profile:e.auth.profile}}),{logOut:function(){return function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.logOut();case 2:return e.next=4,t(le(!1));case 4:t(ue(null,null,null));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return Object(d.jsx)(ne,Object(U.a)({},e))})),pe=n(39),Oe=n.n(pe),he=n(26),me=n(51);var ge=Object(x.b)((function(e){return{isAuth:e.auth.isAuth,error:e.auth.error}}),{login:function(e){var t=e.email,n=e.password,r=e.remember;return function(){var e=Object(g.a)(m.a.mark((function e(a){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.login(t,n,r);case 2:return 0===(c=e.sent).resultCode?(a(de()),a(fe(""))):a(fe(c.messages.join())),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.isAuth,n=e.error,r=e.login;return t?Object(d.jsx)(u.a,{to:"/profile"}):Object(d.jsx)(he.d,{initialValues:{email:"",password:"",remember:!1},validationSchema:me.a({email:me.b().max(50,"Must be 50 characters or less").email("Invalid email address").required("Required"),password:me.b().required("Required")}),onSubmit:function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(d.jsxs)(he.c,{className:Oe.a.form,children:[n&&Object(d.jsx)("div",{className:Oe.a.error,children:n}),Object(d.jsx)("label",{htmlFor:"email",children:"Login"}),Object(d.jsx)(he.b,{name:"email",type:"text"}),Object(d.jsx)(he.a,{name:"email",component:"div",className:Oe.a.error}),Object(d.jsx)("label",{htmlFor:"password",children:"Password"}),Object(d.jsx)(he.b,{name:"password",type:"password"}),Object(d.jsx)(he.a,{name:"password",component:"div",className:Oe.a.error}),Object(d.jsx)(he.b,{name:"remember",type:"checkbox"}),Object(d.jsx)("button",{type:"submit",disabled:t,children:"Login"})]})}})})),ve=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Login"}),Object(d.jsx)(ge,{})]})},xe="INITIALIZED-SUCCESS",we={initialized:!1};var _e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Object(U.a)(Object(U.a)({},e),{},{initialized:!0});default:return e}},Se=n(68),ye=n(100),Pe={friends:[{id:1,name:"Sveta"},{id:2,name:"Dima"}]},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe;return e},Ce=n(108),Ne=Object(V.b)({profilePage:Se.b,messagesPage:ye.a,sidebar:ke,usersPage:q,auth:je,app:_e}),Ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.c,Ue=Object(V.d)(Ne,Ee(Object(V.a)(Ce.a))),Ae=n(62),De=c.a.lazy((function(){return n.e(4).then(n.bind(null,249))})),Le=c.a.lazy((function(){return n.e(3).then(n.bind(null,248))}));var Te=Object(x.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(de());case 2:t({type:xe});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return Object(a.useEffect)((function(){e.initializeApp()}),[]),Object(d.jsx)(d.Fragment,{children:e.initialized?Object(d.jsxs)("div",{className:"app_wrapper",children:[Object(d.jsx)(be,{}),Object(d.jsx)(j,{}),Object(d.jsxs)("main",{children:[Object(d.jsx)(u.b,{path:"/login",render:function(){return Object(d.jsx)(ve,{})}}),Object(d.jsx)(u.b,{path:"/profile/:userId?",render:Object(Ae.a)(Le)}),Object(d.jsx)(u.b,{path:"/dialogs",render:Object(Ae.a)(De)}),Object(d.jsx)(u.b,{path:"/users",render:function(){return Object(d.jsx)($,{})}}),Object(d.jsx)(u.b,{path:"/news",component:b}),Object(d.jsx)(u.b,{path:"/music",component:p}),Object(d.jsx)(u.b,{path:"/settings",component:O})]})]}):Object(d.jsx)(J.a,{})})})),Fe=function(e){return Object(d.jsx)(o.a,{children:Object(d.jsx)(x.a,{store:Ue,children:Object(d.jsx)(Te,{})})})};i.a.render(Object(d.jsx)(Fe,{}),document.getElementById("root")),r()},30:function(e,t,n){e.exports={header:"Header_header__1aaZY",logoBlock:"Header_logoBlock__1gp57",navBlock:"Header_navBlock__142M4",loginBLock:"Header_loginBLock__uenKp"}},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),a=n.n(r),c=n(8),s=n(7);function i(e,t){return u.apply(this,arguments)}function u(){return(u=Object(s.a)(a.a.mark((function e(t,n){var r,s=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:[],n(!0),e.next=4,t.apply(void 0,Object(c.a)(r));case 4:n(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},34:function(e,t,n){e.exports={container:"User_container__V9h_Z",avatarBlock:"User_avatarBlock__1acnA",follow:"User_follow__2fbYP",nameAndStatus:"User_nameAndStatus__37AOV",info:"User_info__3EfeE"}},39:function(e,t,n){e.exports={form:"Login_form__3nE9j",error:"Login_error__9QKVB"}},47:function(e,t,n){"use strict";n(0);var r=n.p+"static/media/loader.b57ed06f.svg",a=n(1);t.a=function(){return Object(a.jsx)("img",{style:{display:"block",margin:"0 auto"},src:r})}},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),a=n(0),c=n.n(a),s=n(1),i=function(e){return function(t){return Object(s.jsx)(c.a.Suspense,{fallback:"",children:Object(s.jsx)(e,Object(r.a)({},t))})}}},65:function(e,t,n){e.exports={container:"Users_container__A-y3J",usersListContainer:"Users_usersListContainer__B3bk1"}},66:function(e,t,n){e.exports={paginationBlock:"Paginator_paginationBlock__1JghB",selectedPage:"Paginator_selectedPage__266y4"}},68:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return m}));var r=n(3),a=n.n(r),c=n(7),s=n(8),i=n(2),u=n(15),o="profile/ADD-POST",l="profile/DELETE-POST",f="profile/SET-USER-PROFILE",d="profile/SET-STATUS",j={PostData:[{id:1,likeCount:5,text:"lorem1"},{id:2,likeCount:6,text:"lorem2"}],profile:null,status:""},b=function(e){return{type:o,text:e}},p=function(e){return{type:d,status:e}},O=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.getProfileInfo(e);case 2:return r=t.sent,n({type:f,profile:r}),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.getStatus(e);case 2:r=t.sent,n(p(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(p(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:var n={id:456,text:t.text,likeCount:0};return Object(i.a)(Object(i.a)({},e),{},{PostData:[].concat(Object(s.a)(e.PostData),[n])});case l:return Object(i.a)(Object(i.a)({},e),{},{PostData:e.PostData.filter((function(e){return e.id!==t.id}))});case f:return Object(i.a)(Object(i.a)({},e),{},{profile:t.profile});case d:return Object(i.a)(Object(i.a)({},e),{},{status:t.status});default:return e}}},69:function(e,t,n){}},[[240,1,2]]]);
//# sourceMappingURL=main.aa32ba00.chunk.js.map